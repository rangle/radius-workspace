import { useState, useRef } from 'react';
import { Meta, Story, Props, Preview } from '@storybook/addon-docs/blocks';
import { Box, Icons, Label, Input, Checkbox, Button, TextArea } from '../';
import { FormControl } from './';

<Meta title="Components/FormControl/Recipes" />

# FormControl Recipes

### Validation

<Preview>
  <Story name="validation">
    <Box>
      <FormControl.Field mb={4}>
        <Label htmlFor="zip-code" required>
          Zip Code
        </Label>
        <Input
          aria-describedby="helper-text"
          id="zip-code"
          placeholder="Zip Code"
          value="20905"
          rightIcon={<Icons.CheckCircle aria-hidden color="ui.success" />}
        />
        <FormControl.Hint id="helper-text">5 Digits</FormControl.Hint>
      </FormControl.Field>
      <FormControl.Field>
        <Label htmlFor="zip-code-2" required>
          Zip Code
        </Label>
        <Input
          id="zip-code-2"
          placeholder="Zip Code"
          aria-describedby="helper-text-2 error-text-2"
          error
          rightIcon={<Icons.Error aria-hidden color="ui.error" />}
        />
        <FormControl.Hint id="helper-text-2">5 Digits</FormControl.Hint>
        <FormControl.Error id="error-text-2">
          Please enter a ZIP code
        </FormControl.Error>
      </FormControl.Field>
    </Box>
  </Story>
</Preview>

### Optional Field

<Preview>
  <Story name="optional">
    <Box>
      <FormControl.Field mb={4}>
        <Label htmlFor="optional" adornment="(optional)">
          Phone number
        </Label>
        <Input id="optional" placeholder="Phone number" />
      </FormControl.Field>
    </Box>
  </Story>
</Preview>

### Location Search

<Preview>
  <Story name="location search">
    {() => {
      const [query, setQuery] = useState('');
      const searchInput = useRef(null);
      function handleClear() {
        setQuery('');
        searchInput.current.focus();
      }
      return (
        <FormControl.Field>
          <Label htmlFor="search">Find a Location</Label>
          <Input
            id="search"
            ref={searchInput}
            aria-describedby="helper-text"
            placeholder="Search"
            value={query}
            onChange={e => setQuery(e.target.value)}
            leftIcon={<Icons.Search aria-hidden />}
            rightIcon={
              query && (
                <Button variant="transparent" p={0} onClick={handleClear}>
                  <Icons.Close title="clear" color="brand.primary" />
                </Button>
              )
            }
          />
          <FormControl.Hint id="helper-text">
            Search by city, address, or postal code
          </FormControl.Hint>
        </FormControl.Field>
      );
    }}
  </Story>
</Preview>

### TextArea

<Preview>
  <Story name="textarea">
    <Box>
      <FormControl.Field mb={4}>
        <Label htmlFor="review" required>
          Review
        </Label>
        <TextArea
          id="review"
          value=""
          placeholder="Tell us your thoughts"
          maxCharacters={100}
        />
      </FormControl.Field>
      <FormControl.Field mb={4}>
        <Label htmlFor="review-2" required>
          Review
        </Label>
        <TextArea
          id="review-2"
          value="I love these t-shirts! I bought four - they're just great basics."
          placeholder="Tell us your thoughts"
          maxCharacters={100}
        />
      </FormControl.Field>
      <FormControl.Field>
        <Label htmlFor="review-3" required>
          Review
        </Label>
        <TextArea
          id="review-3"
          value="I love these t-shirts! I bought four - they're just great basics to have to wear with anything. My only issue is that they run small. I wear a 12-14 and normally fit in a L."
          aria-describedby="error-text"
          placeholder="Tell us your thoughts"
          maxCharacters={100}
          error
        />
        <FormControl.Error id="error-text">
          Please enter a maximum of 100 characters.
        </FormControl.Error>
      </FormControl.Field>
    </Box>
  </Story>
</Preview>

### Checkbox

<Preview>
  <Story name="checkbox">
    <Box>
      <FormControl.FieldSet mb={4}>
        <Label as="legend" htmlFor="pizza-toppings" required>
          Pizza Toppings
        </Label>
        <Checkbox
          id="pizza-toppings"
          aria-describedby="topping-price"
          label="Ezzo Pepperoni"
        />
        <Checkbox
          id="pizza-toppings"
          aria-describedby="topping-price"
          label="Chorizo"
        />
        <Checkbox
          id="pizza-toppings"
          disabled
          aria-describedby="topping-price"
          label="Salami"
        />
        <Checkbox
          id="pizza-toppings"
          aria-describedby="topping-price"
          label="Fior De Latte"
        />
        <Checkbox
          id="pizza-toppings"
          aria-describedby="topping-price"
          label="Asiago"
        />
        <Checkbox
          id="pizza-toppings"
          aria-describedby="topping-price"
          label="Smoled Mozzarella"
        />
        <Checkbox
          id="pizza-toppings"
          aria-describedby="topping-price"
          label="Arugula"
        />
        <Checkbox
          id="pizza-toppings"
          aria-describedby="topping-price"
          label="Pineapple"
        />
        <FormControl.Hint id="topping-price">
          $0.75 per topping
        </FormControl.Hint>
      </FormControl.FieldSet>
      <FormControl.FieldSet>
        <Label htmlFor="terms" required>
          Terms and Conditions
        </Label>
        <Checkbox
          id="terms"
          aria-describedby="error-text"
          label="I agree to the terms and conditions."
          error
        />
        <FormControl.Error id="error-text">
          Please agree to the terms and conditions
        </FormControl.Error>
      </FormControl.FieldSet>
    </Box>
  </Story>
</Preview>
